<div class="Documentation page" data-content-group>
	<section id="DocStartDocumentation">
		<h1><span>Start Documentation</span></h1>
		<p>이 매뉴얼을 보기위한 참고사항입니다.</p>
		<ul>
			<li><strong>{goose}</strong> : goose 프로그램을 설치한 경로입니다. ex) http://domain.com/goose, 서버 경로라면 /goose</li>
			<li><strong>{nest_srl}</strong> : 둥지의 고유번호</li>
			<li><strong>{app_srl}</strong> : App의 고유번호</li>
			<li><strong>{article_srl}</strong> : Article의 고유번호</li>
			<li><strong>{category_srl}</strong> : Article 분류의 고유번호</li>
		</ul>
	</section>

	<section id="DocInstallation">
		<h1><span>Installation</span></h1>
		<p>
			Goose는 설치형 cms입니다. 그래서 직접 서버에 설치하는 작업을 해줘야합니다. 설치는 아래의 환경을 확인하고 설치 바랍니다.
		</p>
		<h2>Environment</h2>
		<p>Goose는 아래와 같은 환경에서 설치할 수 있습니다. 되도록이면 높은버전의 설치를 권장합니다.</p>
		<ul>
			<li>Apache & Nginx</li>
			<li>PHP 5.3+ (5.5+ 권장)</li>
			<li>MySQL (5.x)</li>
			<li>git</li>
		</ul>
		<h2>Process</h2>
		<p>
			버전 업데이트를 이유로 git를 이용하여 설치하시는것을 추천드립니다.<br/>
			이 가이드는 git를 이용하여 설치합니다.
		</p>
		<ol>
			<li>
				git를 이용할 수 있는 터미널에서 웹서버 경로에서 설치를 원하는 곳으로 이동하여 아래 명령을 실행해줍니다.  
				<pre class="code"><code>git clone https://github.com/RedgooseDev/goose.git </code></pre>
				 github에서 복제받으면 /www/goose/ 경로로 소스가 복제됩니다. 

			</li>
			<li>브라우저에서 <code>http://xxx.com/www/goose/</code>경로로 이동합니다. </li>
			<li>인스톨 입력폼의 항목을 입력합니다. 입력이 필요한 항목은 데이터베이스의 정보, 설치시 만들어지는 관리자 정보가 필요합니다. </li>
			<li>항목을 전부 입력했으면 INSTALL 버튼을 누르면 아래 그림과 같이 설치한 항목이 출력이 됩니다. </li>
			<li>다시 <code>http://xxx.com/www/goose/</code>경로로 접속하면 아래 그림과 같이 인트로 Goose 관리페이지를 볼 수 있습니다.</li>
		</ol>
	</section>

	<section id="DocUseGoose">
		<h1><span>Use Goose</span></h1>
		<p>
			이 섹션은 Goose의 기본 개념과 사용법을 안내합니다.<br/>
			<br/>
			Goose를 설치하고 관리자로 접속을 하면 아래와 같은 화면이 나옵니다. (레이아웃 스킨에 따라 형태가 다를 수 있습니다.)
		</p>
		<figure class="fig-center border">
			<img src="./assets/img/img-documentation-03.png" alt=""/>
			<figcaption>Goose 페이지 인트로 화면</figcaption>
		</figure>

		<section id="DocUseGooseMenuGuide">
			<h1><span>Menu guide</span></h1>
			<ul>
				<li><strong>Nest</strong> : 글에대한 둥지입니다. 컴퓨터 파일들의 폴더라고 볼 수 있습니다.</li>
				<li><strong>User</strong> : 등록된 사용자 목록입니다. 공동으로 게시물을 올리고 관리할때 사용자를 관리할 수 있습니다.</li>
				<li><strong>JSON</strong> : 다목적으로 사용할 수 있는 json 데이터에 대한 목록입니다.</li>
				<li><strong>Help</strong> : 현재 보고있는 페이지로 이동합니다.</li>
				<li><strong>Module</strong> : 현재 서버에 올라온 모듈의 목록을 출력합니다. 설치가 필요한 모듈은 설치/설치해제 버튼이 나옵니다.</li>
			</ul>
		</section>

		<section id="DocUseGooseModuleAddress">
			<h1><span>Module address</span></h1>
			<p>
				각 모듈에 접근할 수 있는 주소입니다.<br/>
				자세한 모든 모듈은 <strong>[Develop module - Basic modules list]</strong> 섹션을 참고해주세요.
			</p>
			<div class="ui-scroll-table">
				<div class="wrap">
					<table class="ui-table">
						<caption class="ui-text-right">Goose 접근경로 표</caption>
						<thead>
						<tr>
							<th>이름</th>
							<th>주소</th>
							<th>설명</th>
						</tr>
						</thead>
						<tbody>
						<tr>
							<th>App</th>
							<td>{goose}/app/index/</td>
							<td>둥지의 그룹 모듈</td>
						</tr>
						<tr>
							<th>Article</th>
							<td>{goose}/article/index/{nest_srl}/</td>
							<td>게시글 모듈</td>
						</tr>
						<tr>
							<th>Category</th>
							<td>{goose}/category/index/{nest_srl}/</td>
							<td>게시글의 분류 모듈</td>
						</tr>
						<tr>
							<th>File</th>
							<td>{goose}/file/index/</td>
							<td>게시글의 첨부파일 모듈</td>
						</tr>
						<tr>
							<th>Intro</th>
							<td>{goose}/</td>
							<td>첫페이지 출력 모듈</td>
						</tr>
						<tr>
							<th>JSON</th>
							<td>{goose}/json/index/</td>
							<td>json데이터 관리 모듈</td>
						</tr>
						<tr>
							<th>Modules</th>
							<td>{goose}/modules/index/</td>
							<td>모듈의 목록</td>
						</tr>
						<tr>
							<th>Nest</th>
							<td>{goose}/nest/index/</td>
							<td>article의 그룹이 되는 둥지 모듈</td>
						</tr>
						<tr>
							<th>Page</th>
							<td>{goose}/page/</td>
							<td>일반적인 형식의 페이지 모듈</td>
						</tr>
						<tr>
							<th>User</th>
							<td>{goose}/user/index</td>
							<td>사용자 데이터 관리 모듈</td>
						</tr>
						</tbody>
					</table>
				</div>
			</div>
		</section>

		<section id="DocUseGooseBasicStructure">
			<h1><span>Basic structure</span></h1>
			<p>Goose 의 데이터의 기본구조를 알면 사용에 많은 도움이 됩니다. 글쓰는데 필요한 모듈의 데이터의 관계는 아래 그림과 같습니다.</p>
			<figure class="fig-center">
				<img src="#" alt=""/>
				<figcaption>
					App모듈 데이터의 하위 구성요소는 Nest모듈의 데이터이고, Nest 데이터의 하위 구성요소는 Article모듈의 데이터입니다.<br/>
					Category모듈의 데이터는 Article데이터를 종류별로 묶을때 사용합니다.
				</figcaption>
			</figure>
			<p>다음은 각 모듈에 들어있는 데이터에 대한 설명입니다.</p>
			<ul>
				<li>
					<strong>App</strong>
					<p>여러가지의 둥지를 그룹화를 할대 App 모듈의 데이터를 씁니다. 여러가지 둥지를 한번에 접근하기 편하기 위해 만들어진 모듈 데이터입니다.<br><u>프로젝트 구분용으로 쓰는것을 권장합니다.</u></p>
				</li>
				<li>
					<strong>Nest</strong>
					<p>둥지는 게시글의 종류를 정의하고 관리해주는 역할을 합니다.<br/>일반 게시판으로 보자면 A게시판, B게시판을 볼 수 있습니다. 그 속에 게시글의 목록이 있습니다.</p>
				</li>
				<li>
					<strong>Article</strong>
					<p>일반적인 게시판의 게시글이라고 볼 수 있습니다. 또는 블로그의 글이라고 할수도 있습니다.</p>
				</li>
				<li>
					<strong>Category</strong>
					<p>article의 분류 데이터입니다. 게시판의 분류라고 볼 수 있습니다.</p>
				</li>
				<li>
					<strong>File</strong>
					<p>article의 첨부파일 입니다.</p>
				</li>
			</ul>
		</section>

		<section id="DocUseGooseMakeNest">
			<h1><span>Make nest</span></h1>
			<p>글을 쓰기 이전에 둥지를 만들어 줘야합니다.</p>
			<ol>
				<li>"Nest"메뉴를 선택해줍니다. 메뉴에서 선택하여 들어가도 되고, <code>{goose}/nest/index/</code> 주소를 통해 들어가도 됩니다.</li>
				<li>Nest 목록 화면 아래쪽에 "둥지만들기" 버튼을 선택하면 둥지만들기 작성폼으로 이동합니다.</li>
				<li>항목을 입력하고 "만들기" 버튼을 누르면 목록에 새로운 둥지가 생깁니다.</li>
			</ol>
			<h2>둥지 만들기 폼 주요항목</h2>
			<ul>
				<li>
					<strong>Nest skin </strong>
					<p>둥지의 모듈 스킨을 선택합니다.<br/>스킨에 따라서 항목이 변할수도 있습니다. 둥지 수정에서 이 항목을 변경하면 이전 항목의 설정값이 사라질 수 있으니 주의해주세요. </p>
				</li>
				<li>
					<strong>Article skin</strong>
					<p> 둥지 하위의 데이터인 Article 모듈의 스킨입니다. 다양한 스타일의 article 모듈 스킨 중 하나를 선택하세요. </p>
				</li>
				<li>
					<strong>App</strong>
					<p> 둥지의 그룹에 해당되는 데이터입니다. 여러 둥지를 묶을때 사용됩니다. </p>
				</li>
				<li>
					<strong>아이디 </strong>
					<p>둥지의 고유이름을 지정합니다. app을 개발할때 고유 이름으로 둥지를 접근할때 좋은 수단이 됩니다. </p>
				</li>
				<li>
					<strong>둥지이름</strong>
					 <p>둥지를 설명하는 이름입니다. </p>
				</li>
				<li>
					<strong>목록수</strong>
					<p> article 목록에서 표시되는 글 갯수를 정합니다. </p>
				</li>
				<li>
					<strong>분류사용</strong>
					<p> article의 분류를 사용하는지에 대한 여부를 선택합니다. 분류는 category 모듈의 데이터입니다.</p>
				</li>
			</ul>
		</section>

		<section id="DocUseGooseMakeArticle">
			<h1><span>Make article</span></h1>
			<p>
				둥지를 만들고나면 글을 게시글을 작성할 수 있습니다.<br/>
				둥지에서 article skin에 따라 형태나 내용이 바뀔수도 있습니다.
			</p>
			<ol>
				<li>둥지 목록에서 만들어진 둥지를 선택합니다.</li>
				<li>article 목록에서 "글쓰기" 버튼을 선택합니다.</li>
				<li>글쓰기 폼에서 나와있는 항목을 입력하고, 필요하면 파일첨부를 합니다. article 모듈 스킨에 따라 입력폼의 종류가 바뀝니다.</li>
				<li>항목을 작성하면 "만들기" 버튼을 누르면 목록에서 글이 추가됩니다.</li>
			</ol>
		</section>

		<section id="DocUseGooseEditNavigation">
			<h1><span>Edit Navigation</span></h1>
			<p>
				인스톨을 한 Goose에서 기본적으로 제공하는 메뉴가 있지만 메뉴를 직접 편집할 수 있습니다.<br/>
				각 모듈의 주소는 [Module address] 섹션에서 확인할 수 있습니다.
			</p>
			<ol>
				<li><strong>[JSON]</strong> 메뉴를 선택합니다.</li>
				<li>json 목록에서 "Goose Navigation" 글에서 [수정] 버튼을 누릅니다.</li>
				<li>이미 메뉴의 트리가 만들어져 있으므로 수정해서 사용하면 됩니다.</li>
			</ol>
		</section>
	</section>

	<section id="DocPreference">
		<h1><span>Preference</span></h1>
		<p>
			Goose를 설치하면 <code>{goose}/data/config.php</code>파일을 만들면서 설정값들이 입력됩니다.<br/>
			이 파일은 텍스트 에디터같은것으로 직접 수정해야합니다.
		</p>

		<h2>상수 설정값</h2>
		<ul>
			<li>
				<strong>__GOOSE_URL__</strong>
				<p>goose가 설치된 경로주소. 도메인 이름까지 모두 포함된 주소입니다. ex) http://domain.com/goose/ </p>
			</li>
			<li>
				<strong>__GOOSE_ROOT__</strong>
				<p>goose가 설치된 상대경로 주소. 주로 js나 css, 페이지 링크에서 사용됩니다.</p>
			</li>
		</ul>

		<h2>변수 설정값</h2>
		<ul>
			<li>$dbConfig : 데이터베이스 접속 정보</li>
			<li>$table_prefix : db 테이블 이름 앞에붙는 고정값 </li>
			<li>$apiKey : api 키값. 이값을 암호화하여 사용됩니다.</li>
			<li>$basic_module : goose 첫페이지에 접속하면 출력되는 모듈이름 </li>
			<li>$accessLevel : 권한설정 (설정된 숫자보다 높으면 접근하거나 이용할 수 있습니다.)</li>
			<li>$accessLevel => login : goose 접근 레벨</li>
			<li>$accessLevel => admin : 관리자로 인식하는 레벨.</li>
		</ul>
	</section>

	<section id="DocActionProcess">
		<h1><span>Action process</span></h1>
		<p>
			Goose의 작동방식은 다음과 같은 절차로 실행되어 페이지를 표현합니다.<br/>
			이것은 관리자에 대한 작동방식이며, 방문객에게 보여지는 사이트는 조금 다른방식으로 구현할 수 있습니다.
		</p>
		<figure class="fig-center">
			<img src="./assets/img/img-documentation-01.png" alt=""/>
			<figcaption>Goose 동작 flow</figcaption>
		</figure>
		<ol>
			<li>
				<strong>index.php 접근</strong>
				 <p>서버 세팅에 의해서 관리자 경로로 접근하면 {goose}/index.php가 실행됩니다. </p>
			</li>
			<li>
				<strong>core/init.php 실행</strong>
				 <p>여기서 기초적인 작업이 다 이루어집니다. </p>
			</li>
			<li>
				<strong>각종 기본 상수와 변수설정 </strong>
				 <p>자주 사용되는 상수를 초기화합니다.</p>
			</li>
			<li>
				<strong>환경설정 가져오기</strong>
				 <p>goose 설치가 되었으면 <code>{goose}/data/config.php</code> 파일을 불러옵니다.</p>
			</li>
			<li>
				<strong>core 클래스 로드</strong>
				 <p> goose 프로그램에 필요한 클래스들을 가져옵니다. </p>
			</li>
			<li>
				<strong>$goose 인스턴스 변수 만들기</strong>
				 <p>goose의 핵심적인 클래스인 Goose를 인스턴스 객체화 합니다. db접속이나 프로그램 종료, 각종 중요한 역할에 사용됩니다.</p>
			</li>
			<li>
				<strong>인스톨 검사db접속 및 초기화</strong>
				 <p>$goose 객체에서 Spawn클래스를 이용하여 db를 접속하고 $goose->spawn 객체로 만듭니다.</p>
			</li>
			<li>
				<strong>주소 라우트 초기화</strong>
				 <p>Route 클래스를 이용하여 $router 객체를 만들어 주소를 검사하여 주소에 의한 변수를 초기화 합니다.</p>
			</li>
			<li>
				<strong>기본 시작모듈 초기화</strong>
				 <p>{goose}/data/config.php에 설정된 시작 모듈의 클래스를 객체화 합니다.</p>
			</li>
			<li>
				<strong>시작모듈 index()메서드 실행. 시작모듈 페이지 출력</strong>
				 <p>
					설정된 시작모듈에서 index()메서드가 존재하는지 검사하고 있으면 실행합니다.<br/>
					index() 메서드에서 페이지를 출력하거나 어떤 행동을 처리합니다.
				</p>
			</li>
		</ol>
	</section>

	<section id="DocCoreClass">
		<h1><span>Core class</span></h1>
		<p>
			다음은 Goose 에서 핵심적으로 사용되는 클래스입니다. php용 App 개발시 필요한것들이 많으므로 꼭 불러와야 합니다.<br/>
			매뉴얼에서는 클래스 메서드의 설명, 호출 예제까지 다루지만 인자값과 리턴값에 대한 정보는 소스의 주석을 확인해보시길 바랍니다.
		</p>

		<section id="DocCoreClassGoose">
			<h1><span>Goose.class.php</span></h1>
			<p>
				시스템 관련 클래스입니다.<br/>
				db관련 객체, 인스톨 확인여부, 프로그램 종료, 에러처리 등의 기능을 가지고 있습니다.
			</p>
			<ul>
				<li>
					<strong>Goose::getInstance();</strong>
					 <p>싱글톤 객체로 인스턴스 변수를 가져옵니다. </p>
<pre class="code"><code>// $goose 인스턴스 변수를 만들고 초기화 합니다.
$goose = Goose::getInstance();
$goose->init();</code></pre>
				</li>
				<li>
					<strong>$object->createSpawn();</strong>
					 <p> Spawn클래스를 인스턴스 객체화합니다. 이 메서드를 실행하면 <code>$goose->spawn</code> 형식으로 접근 가능합니다. </p>
				</li>
				<li>
					<strong>Goose::isInstalled() ;</strong>
					 <p>인스톨이 됐는지 확인합니다. </p>
				</li>
				<li>
					<strong>Goose::end();</strong>
					 <p> 프로그램을 종료할때 사용합니다. </p>
				</li>
				<li>
					<strong>Goose::error();</strong>
					 <p> 프로그램이 오류가 났을때의 처리 메서드입니다.</p>
				</li>
			</ul>
		</section>

		<section id="DocCoreClassModule">
			<h1><span>Module.class.php</span></h1>
			<p>
				모듈처리에 관련된 클래스입니다.<br/>
				모듈 불러오기, 모듈 존재여부 확인, 모듈설치, 모듈제거 등의 처리를 합니다.
			</p>
			<ul>
				<li>
					<strong>Module::existModule();</strong>
					<p>모듈이 존재하는지 체크하고 경로를 반환합니다. </p>
				</li>
				<li>
					<strong>Module::load();</strong>
					<p>모듈을 불러와서 객체화시킵니다. </p>
				</li>
				<li>
					<strong>Module::install();</strong>
					<p>모듈을 인스톨합니다. </p>
				</li>
				<li>
					<strong>Module::getInstallModule();</strong>
					<p>설치되어있는 모듈의 목록을 가져옵니다. </p>
				</li>
				<li>
					<strong>Module::setInstallModule();</strong>
					<p>설치된 모듈목록의 원소를 추가하거나 제거합니다. </p>
				</li>
				<li>
					<strong>Module::afterAction();</strong>
					<p>특정 결과값에 의해서 페이지 뒤로가거나 alert 메세지를 띄우거나 특정한 페이지로 이동합니다.</p>
				</li>
			</ul>
		</section>

		<section id="DocCoreClassPaginate">
			<h1><span>Paginate.class.php</span></h1>
			<p>목록의 페이지번호에 관련된 처리를 담당합니다.</p>
<pre><code>require_once('{goose}/core/classes/Paginate.class.php');
$paginateParameter = array('keyword'=>(isset($_GET['keyword']))?$_GET['keyword']:'');
$_GET['page'] = ((isset($_GET['page'])) && $_GET['page'] > 1) ? $_GET['page'] : 1;
$paginate = new Paginate($count, $_GET['page'], $paginateParameter, 15, 5); 
$originalParam = array(
	'table' => Spawn::getTableName('nest'),
	'order' => 'srl',
	'sort' => 'desc',
	'limit' => array($paginate->offset, $paginate->size)
);

// print paginavigation
$paginate->createNavigation();</code></pre>
		</section>

		<section id="DocCoreClassSpawn">
			<h1><span>Spawn.class.php</span></h1>
			<p>데이터베이스 처리를 담당합니다.</p>
			<ul>
				<li>
					<strong>$spawn->connect();</strong>
					<p>db 접속합니다.</p>
				</li>
				<li>
					<strong>$spawn->disconnect();</strong>
					<p>db 접속 종료합니다.</p>
				</li>
				<li>
					<strong>Spawn::getTableName();</strong>
					<p>설치시 table_prefix + module_name 형식으로 이루어진 테이블 이름을 가져옵니다.</p>
				</li>
				<li>
					<strong>Spawn::action();</strong>
					<p>특정 sql 명령어를 실행합니다.</p>
				</li>
				<li>
					<strong>Spawn::getQuery();</strong>
					<p>sql 쿼리를 가져옵니다.</p>
				</li>
				<li>
					<strong>Spawn::insert();</strong>
					<p>데이터를 삽입합니다.</p>
				</li>
				<li>
					<strong>Spawn::update();</strong>
					<p>데이터를 수정합니다.</p>
				</li>
				<li>
					<strong>Spawn::delete();</strong>
					<p>데이터를 삭제합니다.</p>
				</li>
				<li>
					<strong>Spawn::items();</strong>
					<p>여러개의 데이터를 가져옵니다.</p>
				</li>
				<li>
					<strong>Spawn::item();</strong>
					<p>하나의 데이터를 가져옵니다.</p>
				</li>
				<li>
					<strong>Spawn::count();</strong>
					<p>데이터의 갯수를 가져옵니다.</p>
				</li>
				<li>
					<strong>Spawn::arrayToCreateTableQuery();</strong>
					<p>배열을 통하여 테이블을 만듭니다.</p>
				</li>
				<li>
					<strong>Spawn::dropTable();</strong>
					<p>테이블을 삭제합니다.</p>
				</li>
				<li>
					<strong>Spawn::getLastIdx();</strong>
					<p>db에 입력된 데이터의 마지막 번호를 가져옵니다.</p>
				</li>
			</ul>
		</section>

		<section id="DocCoreClassUtil">
			<h1><span>Util.class.php</span></h1>
			<p>
				함수형으로 사용할 수 있는 각종 메서드들을 모았습니다.<br/>
				이 클래스의 메서드는 유동적으로 변할 수 있기 대문에 설명하지 않습니다. 소스의 주석을 참고해주세요.
			</p>
			<p>
				<a href="https://github.com/RedgooseDev/goose/blob/master/core/classes/Util.class.php" target="_blank">Util.class.php</a>
			</p>
		</section>
	</section>

	<!-- Create APP -->
	<section id="DocCreateApp">
		<h1><span>Create APP</span></h1>
		<p>
			이 섹션으로 간단히 목록과 글 상세 내용으로 이동하는 데모 프로그램을 만들겠습니다.<br/>
			이것으로 Goose의 데이터를 가져와서 출력하는 방법에 대해서 이해할 수 있을거라고 믿습니다.
		</p>

		<section id="DocCreateAppReady">
			<h1><span>Ready client app</span></h1>
			<p>
				앱을 만들기전에 먼저 준비해야하는 것들이 있습니다. 다음과 같은 것들은 앱 개발을 할때 최소한 꼭 필요한 것들입니다.
			</p>
			<h2>가져오려는 nest srl값이나 id값을 확인합니다.</h2>
			<p>자료가 올라온 nest의 번호나 nest id를 알아야합니다. 값을 알 수 있는 방법은 아래 그림을 참고해주세요.</p>
			<figure class="fig-center">
				<img src="./assets/img/img-documentation-05.png" alt="Goose 문서목록 화면"/>
				<figcaption>
					nest 목록에서 둥지들 중 하나를 선택하면 문서목록에서 주소를 확인해보면 주소 끝부분에 숫지를 볼 수 있습니다.<br/>
					그 숫자가 nest의 srl값입니다.
				</figcaption>
			</figure>
			<figure class="fig-center border">
				<img src="./assets/img/img-documentation-06.png" alt="Goose 둥지목록 화면"/>
				<figcaption>
					위의 이미지는 둥지목록입니다.<br/>
					빨간색 선으로 표시된 부분은 nest의 id값입니다. id는 둥지를 만든 사람이 직접지은 고유의 단어입니다.
				</figcaption>
			</figure>

			<h2>goose가 설치된 경로를 확인합니다.</h2>
			<p>
				서버에서 goose를 설치한 경로를 확인합니다. 다음은 절대경로를 확인하는 터미널 명령입니다.<br/>
			</p>
<pre class="code"><code>$ cd goose
$ pwd
/Users/redgoose/dropbox/Sites/demos/goose</code></pre>
			<p>절대경로로 사용해도 되고, 상대경로도 사용해도 됩니다. ex) <code>../goose</code></p>
		</section>

		<section id="DocCreateAppLoadLibrary">
			<h1><span>Load goose library</span></h1>
			<p>
				이제 본격적으로 방문객에게 보여주는 앱을 만들어보겠습니다.<br/>
				앱으로 사용되는 폴더를 만들어서 <code>index.php</code>파일을 만들고 일단 다음과 같은 코드를 넣습니다.
			</p>
<pre class="code"><code>&lt;?php

define('__GOOSE__', true); // goose 프로그램을 실행한다는 의미로 지정합니다.
define('__PWD__', dirname(__FILE__)); // 현재 위치를 저장합니다.

require_once('../goose/core/lib.php'); // goose의 경로. 절대경로가 될 수 있고 상대경로가 될 수 있습니다.
</code></pre>
			<p>
				위의 코드는 goose 프로그램에서 사용되는 라이브러리를 사용하는데 꼭 필요한 부분입니다.<br/>
				lib.php파일을 불러오는것은 goose 프로그램의 각종 클래스나 변수들을 초기화 합니다.
			</p>
			<pre class="code"><code>var_dump($goose);</code></pre>
			<p>
				위와과같은 명령어로 변수의 내용을 확인해보면 다음과 같은 내용을 볼 수 있다면 goose에서 사용되는 라이브러리를 정상적으로 불러오고 있다는 의미입니다.<br/>
				이제 goose에서 사용되는 데이터베이스, 개발에 관련된 도구들을 사용할 수 있습니다.
			</p>
			<p>
				다음은 goose 프로그램에서 사용되는 클래스나 기능, 팁이 안내되어있는 링크의 목록입니다. 개발시 꼭 참고할만한 것들이니 꼭 참고하시길 바랍니다.
			</p>
			<ul>
				<li>Core class : <a href="#Documentation/DocCoreClass">바로가기</a></li>
				<li>Tips : <a href="#Documentation/DocTips">바로가기</a></li>
			</ul>
		</section>

		<section id="DocCreateAppPrintArticles">
			<h1><span>Print articles</span></h1>
			<p>이제는 글 데이터를 가져와 목록에 출력하도록 하겠습니다.</p>
<pre class="code"><code>&lt;?php
// article 모듈을 불러옵니다.
$articles = Module::load('article');

// 데이터를 가져옵니다.
$item = $articles->getItems(array(
	'where' => 'srl='.(int)$_GET['srl']
));

// for문으로 데이터를 출력합니다.
echo "&lt;ul>";
foreach ($items as $k=>$v)
{
	echo "&lt;li>$v['title']&lt;/li>";
}
echo "&lt;/ul>";
</code></pre>
			<p>
				무언가 과정이 많이 생략된듯할 정도로 간단하게 목록이 출력되어 버렸습니다.<br/>
				데이터베이스의 필드의 설명이나 모듈을 불러와서 어떻게 쓰는지에 대해서 이 섹션에서 설명하기 어렵습니다. 모든 모듈이 같은 방식으로 동작하기 않기 때문입니다.<br/>
				그래서 각 모듈에 관한 자세한 설명서를 보려면 goose 프로그램에서 <code>Module</code>메뉴를 선택하고 <code>article</code> 모듈에서 <code>도움말</code> 링크를 선택하면 도움말 페이지를 보시는것을 권해드립니다.
			</p>
			<p>
				일단 위의 예제소스와같은 경우는 article 모듈을 불러와서 <code>$article->getItems()</code> 메서드를 통해서 db에 있는 article 데이터를 가져와서 foreach 문으로 목록형태로 출력하는 방식입니다.<br/>
				이것이 가장 기초적인 형태이며 나머지는 각 모듈의 도움말 문서를 참고해가며 응용하며 제작해야합니다.
			</p>
			<figure class="fig-center border">
				<img src="./assets/img/img-documentation-07.png" alt="모듈화면"/>
				<figcaption>각 모듈제목 옆에 <strong>"?"</strong> 아이콘을 클릭하면 해당 모듈의 도움말을 볼 수 있습니다.</figcaption>
			</figure>
			<p>
				설명을 길게 늘여놓는것보다 직접 소스를 보고 판단하시는것이 좋은분을 위해 샘플소스를 마련했습니다.
			</p>
			<p>
				<a href="./files/goose_demo.zip"><strong>goose demo 소스 다운로드</strong></a>
			</p>
		</section>

	</section>
	<!-- // Create APP -->

	<!-- Develop module -->
	<section id="DocDevelopModule">
		<h1><span>Develop module</span></h1>
		<p>
			goose에서 사용하는 모듈이라는것은 마치 레고블럭과 같습니다.<br/>
			레고블럭은 다양한 모양이 있으면서 끼우는 홈의 갯수나 위치가 틀리고, 색상도 가지각색입니다. 이것들을 이용해서 또다른 조합된 블럭이나 도구를 만들어서 완성된 뭔가를 만드는것이죠.(성이나 건물, 자동차 등등...)<br/>
			이것과 같은 방향성을 목표로 가지고 있는것이 이 모듈입니다.
		</p>
		<figure class="fig-center">
			<img src="./assets/img/img-documentation-04.jpg" alt="lego"/>
			<figcaption>레고 조립의 과정</figcaption>
		</figure>

		<section id="DocDevelopModuleProcess">
			<h1><span>Work process</span></h1>
			<p>
				goose 프로그램은 여러가지 모듈들에 의해서 만들어지는 프로그램입니다.<br/>
				다음은 모듈을 불러올때 작동하는 과정입니다.
			</p>
			<figure class="fig-center">
				<img src="./assets/img/img-documentation-02.png" alt="모듈 실행과정"/>
			</figure>
			<ol>
				<li>
					<strong>Module::load() 메서드 실행</strong>
					<p>$apple = Module::load('apple'); 형식으로 실행 시작합니다.</p>
				</li>
				<li>
					<strong>{module}/setting.json 파일 로드</strong>
					<p>환경설정 json 데이터입니다.</p>
				</li>
				<li>
					<strong>{module}/{module}.class 파일 로드</strong>
					<p>모듈 메인 클래스 파일을 불러옵니다.</p>
				</li>
				<li>
					<strong>인스톨 여부와 권한 검사</strong>
					<p>인스톨이 필요한 모듈이며 인스톨이 되어있는지 접근할 수 있는 권한이 있는지 검사합니다.</p>
				</li>
				<li>
					<strong>모듈 클래스를 인스턴스 객체로 제작</strong>
				</li>
				<li>
					<strong>모듈 객체에 필요한 변수들 삽입</strong>
					<p>setting.json에서 가져온 설정 변수, $goose 객체나 기타 다른 변수들을 모듈 객체로 삽입</p>
				</li>
				<li>
					<strong>모듈 객체 리턴</strong>
					<p>위의 과정을 거친 객체를 리턴시켜 호출한 영역에서 사용할 수 있습니다.</p>
				</li>
			</ol>
		</section>

		<section id="DocDevelopModuleList">
			<h1><span>Modules list</span></h1>
			<p>
				Goose의 프로그램의 대부분은 모듈에 의해서 돌아가고 있습니다. 그래서 일부 모듈은 필수로 설치되어있어야 하는 모듈도 있습니다.<br/>
				다음 표는 기본적으로 사용되는 모듈의 목록입니다.
			</p>
			<div class="ui-scroll-table">
				<div class="wrap">
					<table class="ui-table">
						<caption class="ui-text-right">기본으로 제공되는 모듈목록</caption>
						<colgroup>
							<col width="14%"/>
							<col width="8%"/>
							<col width="8%"/>
							<col width=""/>
						</colgroup>
						<thead>
							<tr>
								<th>이름</th>
								<th>DB</th>
								<th>필수</th>
								<th>사용용도</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th>api</th>
								<td class="ui-text-center">X</td>
								<td class="ui-text-center">X</td>
								<td>외부에서 데이터를 읽고쓰는 기능을 하는 모듈</td>
							</tr>
							<tr>
								<th>app</th>
								<td class="ui-text-center">O</td>
								<td class="ui-text-center">X</td>
								<td>nest모듈의 데이터를 그룹화 하는 모듈. 프로젝트 이름으로 쓰는것을 권장합니다.</td>
							</tr>
							<tr>
								<th>article</th>
								<td class="ui-text-center">O</td>
								<td class="ui-text-center">X</td>
								<td>글 목록을 관리하는 모듈</td>
							</tr>
							<tr>
								<th>auth</th>
								<td class="ui-text-center">X</td>
								<td class="ui-text-center">O</td>
								<td> 관리 프로그램의 접근을 담당하는 모듈 (로그인)</td>
							</tr>
							<tr>
								<th>category</th>
								<td class="ui-text-center">O</td>
								<td class="ui-text-center">X</td>
								<td>article의 분류를 관리하는 모듈</td>
							</tr>
							<tr>
								<th>error</th>
								<td class="ui-text-center">X</td>
								<td class="ui-text-center">O</td>
								<td>각종 에러메세지를 출력하는 모듈</td>
							</tr>
							<tr>
								<th>file</th>
								<td class="ui-text-center">O</td>
								<td class="ui-text-center">X</td>
								<td>첨부파일을 관리하는 모듈</td>
							</tr>
							<tr>
								<th>install</th>
								<td class="ui-text-center">X</td>
								<td class="ui-text-center">O</td>
								<td>goose 프로그램 설치에 관한 모듈</td>
							</tr>
							<tr>
								<th>intro</th>
								<td class="ui-text-center">X</td>
								<td class="ui-text-center">X</td>
								<td>goose 관리자 첫페이지 모듈</td>
							</tr>
							<tr>
								<th>json</th>
								<td class="ui-text-center">O</td>
								<td class="ui-text-center">X</td>
								<td>json데이터를 관리하는 모듈</td>
							</tr>
							<tr>
								<th>layout</th>
								<td class="ui-text-center">X</td>
								<td class="ui-text-center">X</td>
								<td>페이지 레이아웃 겉면을 출력하는 모듈</td>
							</tr>
							<tr>
								<th>modules</th>
								<td class="ui-text-center">X</td>
								<td class="ui-text-center">X</td>
								<td>모듈의 목록을 출력하는 모듈. 모듈의 정보나 설치여부를 알 수 있고, 모듈 설치나 삭제도 가능하다.</td>
							</tr>
							<tr>
								<th>nest</th>
								<td class="ui-text-center">O</td>
								<td class="ui-text-center">X</td>
								<td>article 모듈의 그룹단위의 모듈. 글들이 담겨있는 폴더라고 할 수 있다.</td>
							</tr>
							<tr>
								<th>page</th>
								<td class="ui-text-center">X</td>
								<td class="ui-text-center">X</td>
								<td> 단순 페이지를 출력하는 모듈</td>
							</tr>
							<tr>
								<th>script</th>
								<td class="ui-text-center">X</td>
								<td class="ui-text-center">X</td>
								<td>특정한 기능을 실행하기만 할때 쓰는 모듈</td>
							</tr>
							<tr>
								<th>user</th>
								<td class="ui-text-center">O</td>
								<td class="ui-text-center">O</td>
								<td>사용자 정보를 관리하는 모듈</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</section>

		<section id="DocDevelopModuleMakeBasicModule">
			<h1><span>Make Basic Module</span></h1>
			<p>
				Goose 프로그램의 핵심적인 기능인 모듈을 만들도록 해보겠습니다.<br/>
				모듈의 파일은 <code>{goose}/module/</code> 경로에 있습니다. <a href="#Documentation/DocDevelopModuleList">Module list</a> 섹션에 있는 폴더이름들을 볼 수 있습니다.
			</p>
			<h2>"helloworld"폴더를 만들고 파일구성</h2>
			<p>
				모듈의 작동구조 이해를 위하여 "helloworld" 키워드를 출력하는 모듈을 만들어보도록 하겠습니다.<br/>
				과정은 콘솔에서 명령어를 치는 형식으로 하겠습니다.
			</p>
			<ol>
				<li>
					<p>goose가 설치된 경로로 이동하고, module 폴더로 이동하여 "helloworld"라는 폴더를 만듭니다.</p>
<pre class="code"><code>$ pwd
/demos/goose
$ cd module
$ mkdir helloworld
$ cd helloworld
$ pwd
/demos/goose/module/helloworld
</code></pre>
				</li>
				<li>
					<p>"helloworld.class.php"파일을 만듭니다.</p>
					<pre class="code"><code>$ vim helloworld.class.php</code></pre>
					<p>
						왜 <code>모듈이름.class.php</code>파일을 만들어야하는지에 대한 설명이 필요할거 같습니다.<br/>
					</p>
					<p>
						모듈은 <code>Module::load('모듈이름');</code> 메서드를 통해 실행될때 <strong>{goose}/모듈이름/모듈이름.class.php파일이 먼저 include됩니다.</strong><br/>
						<code>http://domainName.com/goose/모듈이름/</code>주소를 통해서 접근해도 <code>Module::load('모듈이름');</code> 메서드가 실행됩니다.<br/>
						<code>모듈이름.class.php</code>파일은 모듈을 대표하는 클래스 파일이라고 생각하시면 됩니다.
					</p>
					<p><br/></p>

					<p>helloworld.class.php 파일을 편집툴로 열어서 코드를 입력할 준비를 합니다.</p>
					<pre class="code"><code>$ vim helloworld.class.php</code></pre>
					<p>아래 코드를 적어넣고 저장합니다.</p>
<pre class="code"><code>&lt;?php
if (!defined('__GOOSE__')) exit();

class Helloworld {

	public $goose;

	public function index()
	{
		echo "hello world";
	}
}
</code></pre>
				</li>
			</ol>
			<h2>setting.json 파일 만들기</h2>
			<ol>
				<li>
					<p>웹브라우저에서 <code>{goose}/helloworld/</code> 주소로 접속합니다.</p>
					<figure class="fig-center border">
						<img src="./assets/img/img-documentation-08.png" alt="goose 101 error"/>
					</figure>
					<p>
						역시 손쉽게 "helloworld"를 볼 수 없나봅니다.<br/>
						"SETTING.JSON파일이 없습니다."라는 메세지를 볼 수 있는데 말그대로 모듈에 setting.json파일이 없다는 의미입니다.
					</p>
				</li>
				<li>
					<p>setting.json 파일을 만듭니다. 다음과 같이 콘솔에서 setting.json파일을 만듭니다.</p>
					<pre class="code"><code>$ vim setting.json</code></pre>
					<p>소스코드는 다음과 같이 적어넣습니다.</p>
<pre class="code"><code>{
	"name" : "helloworld",
	"title" : "hello world",
	"description" : "helloworld 메세지를 출력하는 모듈입니다.",
	"permission" : 0
}</code></pre>
					<p>
						여기에서 각 항목에 대한 설명이 필요한거 같습니다. setting.json에서 기본적으로 필요로하는 값입니다.<br/>
						다음은 각 항목에 대한 설명입니다.
					</p>
					<ul>
						<li>name : 모듈의 아이디입니다. 이름은 폴더이름과 똑같아야합니다. (필수)</li>
						<li>title : 모듈의 이름입니다. 모듈 아이디와 달라도 됩니다.</li>
						<li>description : 이 모듈이 어떤것인지에 대한 장문의 설명입니다.</li>
						<li>permission : 접근 레벨값입니다. 회원정보에 레벨값이 있는데 높을수록 높은 권한을 가지고 있습니다. 0은 아무나 접근할 수 있습니다.</li>
					</ul>
				</li>
			</ol>
			<h2>hello world 메세지 확인하기</h2>
			<p>
				다시 웹브라우저에서 <code>{goose}/helloworld/</code> 주소로 접속합니다.<br/>
				이번에는 브라우저 화면에서 "hello world"라는 키워드를 볼 수 있습니다.<br/>
				<br/>
				다음 링크는 helloworld 모듈을 다운로드할 수 있습니다.
			</p>
			<p><a href="./files/helloworld.zip"><strong>heloworld 모듈소스 다운로드</strong></a></p>
		</section>

		<section id="DocDevelopModuleAdv">
			<h1><span>Advanced Module #1</span></h1>
			<p>
				모듈개발에 대해서 좀 더 자세하게 알아보겠습니다.<br/>
				이전에 만들었던 helloworld 모듈에 이어서 helloworld2 모듈을 만들어 helloworld 모듈을 로드하여 참조할 수 있습니다.<br/>
				이로써 모듈끼리 서로 연계할 수 있는법에 대해 알아보도록 하겠습니다.
			</p>
			<h2>helloworld2 모듈 만들기</h2>
			<p>
				<a href="#Documentation/DocDevelopModuleMakeBasicModule">Make Basic Module</a> 과정을 통하여 helloworld2 라는 이름으로 모듈을 하나 더 만듭니다.<br/>
				helloworld 모듈을 복제하여 helloworld2를 만들었다면 helloworld2.class.php 파일의 소스는 아래와 같을겁니다.
			</p>
<pre class="code"><code>&lt;?php
if (!defined('__GOOSE__')) exit();

class Helloworld2 {

	public $goose;

	public function index()
	{
		echo "hello world second";
	}
}
</code></pre>
			<h2>helloworld 모듈에서 값 추가</h2>
			<p>
				테스트를 위하여 helloworld 모듈에서 배열 값 하나와 메서드 하나를 추가하겠습니다. helloworld.class.php 파일을 아래와 같이 수정해줍니다.
			</p>
<pre class="code"><code>&lt;?php
if (!defined('__GOOSE__')) exit();

class Helloworld {

	public $goose;
	public $fruits = array('apple', 'banana', 'mango', 'tomato');

	public function index()
	{
		echo "hello world";
	}

	public function dudu()
	{
		echo "du du du du du";
	}
}
</code></pre>
			<p>
				helloworld 모듈에 "fruits"라고 과일이름이 담긴 배열과 "dudu"라고 "du du du..."라고 출력하는 메서드를 추가했습니다.<br/>
				이제 이 값들을 helloworld2 모듈에서 불러내보겠습니다.
			</p>
			<h2>helloworld 모듈 불러오기</h2>
			<p>
				이제 helloworld 모듈에서 helloworld 모듈을 불러오겠습니다.<br/>
				helloworld2.class.php 파일을 엽니다. <code>Module::load()</code> 메서드를 이용하여 $hello라는 변수에 넣고 내용물을 확인해봅니다.
			</p>
<pre class="code"><code>
public function index()
{
	$hello = Module::load('helloworld');
	var_dump($hello);
}
</code></pre>
			<p>친절하게 표시되어있지는 않지만 fruits 변수가 있다는것을 확인할 수 있습니다.</p>
			<pre class="code"><code>object(Helloworld)#9 (2) { ["goose"]=> NULL ["fruits"]=> array(4) { [0]=> string(5) "apple" [1]=> string(6) "banana" [2]=> string(5) "mango" [3]=> string(6) "tomato" } }</code></pre>
			<h2>helloworld 모듈의 fruits값을 가져오고, dudu() 메서드 실행하기</h2>
			<p>
				<code>$hello</code>라는 변수로 helloworld 모듈 인스턴스 객체로 가져왔으니 이제 사용하도록 하겠습니다.<br/>
			</p>
<pre class="code"><code>// helloworld2.class.php

&lt;?php
if (!defined('__GOOSE__')) exit();

class Helloworld2 {

	public $goose;

	public function index()
	{
		$hello = Module::load('helloworld');

		foreach($hello->fruits as $k=>$v)
		{
			echo $v.", ";
		}

		echo "&lt;hr/>";

		$hello->dudu();
	}
}
</code></pre>
			<p>소스를 수정하고 확인하면 아래와 같은 값을 확인할 수 있습니다.</p>
<pre class="code"><code>apple, banana, mango, tomato,
---------------------
du du du du du
</code></pre>
			<p>이것으로 다른 모듈을 불러와 객체화 시키는법에 대해서 알아봤습니다.</p>
		</section>
		<section id="DocDevelopModuleAdv2">
			<h1><span>Advanced Module #2</span></h1>
			<p>
				이것으로 모듈제작 활용편을 마지막으로 데이터베이스 테이블을 만들고 모듈 인스톨을 하는 과정까지 알아보겠습니다.<br/>
				데이터베이스를 활용하여 만든 모듈들이 article, nest 같은 모듈들입니다.
			</p>
			<h2>helloworld3 모듈 만들기</h2>
			<p>
				이전 섹션과 마찬가지로 helloworld 모듈을 복제하여 helloworld3모듈을 만듭니다.
			</p>
			<h2>setting.json 수정하기</h2>
			<p>
				아래와 같이 인스톨이 필요한 모듈이라는 표시를 해주기 위해서 항목을 추가해넣어줍니다.
			</p>
			<pre class="code"><code>"install" : true</code></pre>
			<h2>install.json 파일 만들기</h2>
			<p>
				db 테이블을 만들기위한 테이블 구조의 설정 json파일을 만들어줘야합니다.<br/>
				이것이 정석적인 방식은 아니며 테이블을 만들기 쉽게 만들기 위하여 고안된 방식입니다.<br/>
				{goose}/helloworld3/install.json 파일을 만들고 다음과 같이 테이블 구조를 이루는 코드를 넣습니다. 필드는 srl, name, title, reg_date로 하겠습니다.
			</p>
<pre class="code"><code>[
	{
		"name": "srl",
		"type": "int",
		"length": 11,
		"etc": "not null",
		"auto": true,
		"key": true
	},
	{
		"name" : "name",
		"type" : "varchar",
		"length" : 120,
		"etc" : "default null"
	},
	{
		"name" : "title",
		"type" : "varchar",
		"length" : 255,
		"etc" : "default null"
	},
	{
		"name" : "regdate",
		"type" : "varchar",
		"length" : 14,
		"etc" : "default null"
	}
]
</code></pre>
			<h2>install() 메서드 만들기</h2>
			<p>
				인스톨이라고 해서 모든것을 자동으로 처리해주지 않습니다. 아래 소스를 참고하여 install() 메서드와 uninstall() 메서드를 추가해줍니다.<br/>
				여기에서 __construct() 메서드가 추가되었으며 name, set 값이 추가되었습니다.
			</p>
<pre class="code"><code>// helloworld3.class.php

&lt;?php
if (!defined('__GOOSE__')) exit();

class Helloworld3 {

	public $name, $path, $set;

	/**
	 * construct
	 *
	 * @param array $getter
	 */
	public function __construct($getter=array())
	{
		$this->name = $getter['name'];
		$this->set = $getter['set'];
	}

	public function index()
	{
		echo "hello world";
	}

	/**
	 * install
	 *
	 * @param array $installData install.json 데이터
	 * @return string 문제없으면 "success" 출력한다.
	 */
	public function install($installData)
	{
		$query = Spawn::arrayToCreateTableQuery(array(
			'tableName' => Spawn::getTableName($this->name),
			'fields' => $installData
		));

		return Spawn::action($query);
	}

	/**
	 * uninstall
	 *
	 * @param string $mod 모듈이름
	 * @return string 문제없으면 "array('state' => true)" 출력
	 */
	public function uninstall($mod)
	{
		Spawn::dropTable(Spawn::getTableName($mod));
		return array('state' => true);
	}
}
</code></pre>
			<h2>모듈 설치하기</h2>
			<p>
				웹브라우저에서 "{goose}/modules/index/" 페이지로 접속합니다.<br/>
				goose의 모듈들의 내역이 나옵니다. 지금까지 만든 helloworld 시리즈들을 볼 수 있는데 helloworld3는 설치 버튼이 있는것을 볼 수 있습니다.
			</p>
		</section>
	</section>
	<!-- // Develop module -->

	<!-- Tips -->
	<section id="DocTips">
		<h1><span>Tips</span></h1>
		<p>참고할만한 팁들을 따로 모아둔 섹션입니다.</p>
		<p>넣을예정..</p>
		<ul>
			<li>db에서 데이터 가져오기</li>
		</ul>
	</section>
	<!-- // Tips -->
</div>
