<?php
if (!defined('__GOOSE__')) exit();

$gooseAdmin = $this->parent->goose->isAdmin;
?>

<section>
	<div class="gs-headding">
		<h1>
			<a href="<?=__GOOSE_ROOT__?>/user/index/">사용자 목록</a>
		</h1>
		<p><?=$this->set['description']?></p>
		<?php
		if ($this->parent->isAdmin)
		{
		?>
			<nav>
				<a href="<?=__GOOSE_ROOT__?>/help/<?=$this->parent->name?>/" class="help" title="go to help"><i class="icn-help"></i></a>
				<a href="<?= __GOOSE_ROOT__ ?>/modules/editSetting/<?=$this->parent->name?>/" class="setting" title="edit setting"><i class="icn-setting"></i></a>
			</nav>
		<?php
		}
		?>
	</div>
	<?php
	if (count($repo['user']))
	{
	?>
		<!-- index -->
		<ul class="idx-document list">
			<?php
			foreach ($repo['user'] as $k=>$v)
			{
				if ($gooseAdmin || ($_SESSION['goose_email'] == $v['email']))
				{
			?>
					<li>
						<div class="wrap">
							<div class="body">
								<strong class="hd"><?=$v['name']?></strong>
								<div class="inf">
									<span><b>Email</b><?=$v['email']?></span>
									<span><b>Date</b><?=Util::convertDate($v['regdate'])?></span>
									<span><b>Level</b><?=$v['level']?></span>
								</div>
								<nav>
									<a href="<?=__GOOSE_ROOT__.'/user/modify/'.$v['srl'].'/'?>">수정</a>
									<a href="<?=__GOOSE_ROOT__.'/user/remove/'.$v['srl'].'/'?>">삭제</a>
								</nav>
							</div>
						</div>
					</li>
			<?php
				}
			}
			?>
		</ul>
		<!-- // index -->
	<?php
	}
	?>
	<nav class="gs-btn-group right">
		<a href="<?=__GOOSE_ROOT__?>/user/index/" class="gs-button">목록</a>
		<?=($gooseAdmin) ? '<a href="'.__GOOSE_ROOT__.'/user/create/" class="gs-button col-key">사용자 등록</a>' : ''?>
	</nav>
</section>